/* Prevel Framework v1.0.4
 * http://github.com/chernikovalexey/Prevel
 * 
 * Copyright 2011, Alexey Chernikov
 * Dual licensed under the:
 *  - GNU LGPL (http://opensource.org/licenses/lgpl-license.php)
 *  - MIT License (http://opensource.org/licenses/mit-license.php)
 * 
 * =====
 * 
 * Contains YASS v0.3.9
 * http://yass.webo.in
 * 
 * Copyright 2008-2009, Nikolay Matsievsky (sunnybear)
 * Dual licensed under the:
 *  - MIT License (http://opensource.org/licenses/mit-license.php)
 *  - GNU GPL (http://opensource.org/licenses/gpl-license.php)
**/
(function(q,g,s,C,p,o,E,z,I,y,A,H,D,B,J){(function(){var g={"function":"fn",object:"obj",number:"int",string:"str","boolean":"bool","undefined":b},m=!!Object[s].__lookupGetter__&&!!Object[s].__lookupSetter__&&!!Object[s].__defineGetter__&&!!Object[s].__defineSetter,h=function(){return function(a,b,c){return h.fn?new h.fn._(a,b,c):J}}(),b=q.navigator.userAgent.toLowerCase();h.extend=function(a,b){b||(b=a,a=h);if(m){var c,d,e;for(e in b)c=b.__lookupGetter__(e),d=b.__lookupSetter__(e),c||d?(c&&a.__defineGetter__(e,c),d&&a.__defineSetter__(e,d)):a[e]||(a[e]=b[e])}else for(e in b)a[e]||(a[e]=b[e]);return a},h.extend({implement:function(a,b){return h.extend(a[s],b)},isArray:Array.isArray||function(a){return Object[s].toString.call(a)==="[object Array]"},type:function(a,b){var c;return h.isArray(a)?c="arr":a instanceof RegExp?c="regexp":a instanceof Date?c="date":a===y?c=E:c=g[typeof a],b?c===b:c},empty:function(a){if(h.type(a,"obj")){for(var c in a)return!1;return!0}return h.type(a,E)||h.type(a,b)||!a.length},trim:function(a){return String[s].trim?a.trim():a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},each:function(a,b){for(var c=a.length;--c>-1;)b.call(a[c],c,a[c])},inArray:function(a,b){return Array[s].indexOf?b.indexOf(a):(h.each(b,function(b){if(a===this)return b}),-1)},toParams:function(a){if(!h.type(a,"obj"))return a;var b=[],c;for(c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},JSON:function(b){return q.JSON&&q.JSON.parse?q.JSON.parse(b):!/[^,:{}[]0-9.-+Eaeflnr-u nrt]/.test(b.replace(/"(.|[^"])*"/g,""))&&eval("("+b+")")},browser:function(a){var c=/opera/i.test(b),d=/chrome/i.test(b),c={opera:c,ie:!c&&/msie/i.test(b),ie6:!c&&/msie 6/i.test(b),ie7:!c&&/msie 7/i.test(b),ie8:!c&&/msie 8/i.test(b),firefox:/firefox/i.test(b),chrome:d,safari_khtml:!d&&/khtml/i.test(b),safari:!d&&/webkit|safari/i.test(b)},e;for(e in c)if(c[e])return a?a===e:e}}),q.pl=h})(),function(){pl.extend({ajax:function(a){var b,c=a.load||A,d=a.error||A,e=a.success||A,f=function(c){b.setRequestHeader("X-Requested-With","XMLHttpRequest"),c&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset="+(a.charset||"utf-8"))};a.type=a.type||"POST",a.data=pl.toParams(a.data||{}),a.async=a.async||!0,function(){if(q.XMLHttpRequest)b=new XMLHttpRequest,b.overrideMimeType&&b.overrideMimeType("text/html");else if(q.ActiveXObject)try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}if(!b)return alert("Could not create an XMLHttpRequest instance.");b.onreadystatechange=function(){switch(b.readyState){case 1:c();break;case 4:b.status===200?e(a.dataType==="json"?pl.JSON(b.responseText):b.responseText):d(b.status)}}}();switch(a.type){case"POST":b.open("POST",a.url,a.async),f(1),b.send(a.data);break;case"GET":b.open("GET",a.url+"?"+a.data,a.async),f(),b.send(y)}}})}(),function(){var a,b={className:"class",cssFloat:"float",htmlFor:"for"};pl.extend({fn:{},find:function(a,b){return g.querySelectorAll(b?b+" "+a:a)}}),pl.extend(pl.fn,{_:function(){return function(b,c,e){var f;switch(pl.type(b)){case"str":var h=b.match(I);if(h)f=c,h=g.createElement(h[1]),f=[f?pl.extend(h,f):h];else switch(pl.type(c)){case"str":switch(pl.type(e)){case"int":f=[pl.find(b,c)[e]];break;default:case z:f=pl.find(b)}break;case"int":f=[pl.find(b)[c]];break;default:case z:f=pl.find(b)}break;case"fn":d.r(b);break;case"obj":f=b[0]?0:[b]}return this.e=f,this.s=arguments,a=this,this}}(),len:function(){return this.e.length},last:function(){var a=this.e.length;return this.e=[a?this.e[a-1]:y],this},html:function(a,b){return e(this,"innerHTML",a,b)},text:function(a,b){return e(this,c,a,b)},get:function(a){var b=this.e;return b.length===1?b[0]:pl.type(a,z)?b:b[a]},parent:function(a){return a||(a=1),this.e=[h(this.e[0],a)],this},remove:function(){return pl.each(this.e,function(){this.parentNode.removeChild(this)}),this},addClass:function(a){return pl.each(this.e,function(){this[o]&&pl.inArray(a,this[o].split(" "))===-1&&(this[o]+=(this[o]?" ":"")+a)}),this},hasClass:function(a){return this.e[0]&&this.e[0][o]?pl.inArray(a,this.e[0][o].split(" "))!==-1:!1},removeClass:function(a){return pl.each(this.e,function(){if(this[o]){var b=this[o].split(" "),c=pl.inArray(a,b);c!==-1&&(b.splice(c,1),pl.empty(b)?this[B]("class"):this[o]=b.join(" "))}}),this},attr:function(a,c){a=b[a]||a;if(c)pl.each(this.e,function(){this[H](a,c)});else switch(pl.type(a)){case"obj":for(var d in a)arguments.callee.call(this,d,a[d]);break;case"str":return this.e[0][D](a)}return this},removeAttr:function(a){return a=b[a]||a,pl.each(this.e,function(){this[B](a)}),this},css:function(a,b){if(b){a=f.s(a);if(pl.type(b,"int")&&!f.r[a])b+="px";else if(a==="opacity")var c=f.o(b),a=c[0],b=c[1];pl.each(this.e,function(){this.style[a]=b})}else switch(pl.type(a)){case"obj":for(c in a)arguments.callee.call(this,c,a[c]);break;case"str":return f.g(this.e[0],a)}return this},each:function(b){return pl.each(a.e,function(){b.call(this)}),this},bind:function(a,b){return d._r(a,b,1)},unbind:function(a,b){return d._r(a,b,0)},show:function(){return pl.each(this.e,function(){pl(this).css("display")==="none"&&pl(this).css("display",this[D]("plrd")||"")}),this},hide:function(){return pl.each(this.e,function(){var a=pl(this).css("display");a!=="none"&&(this[H]("plrd",a),this.style.display="none")}),this},after:function(a){if(pl.type(a,"obj")){var b=g.createElement("div");b.appendChild(a),a=b.innerHTML}return pl.each(this.e,function(){var b=this,c=g.createElement("div");c.innerHTML=a;try{pl.each(c.childNodes,function(){b.parentNode.insertBefore(this,b.nextSibling)})}catch(d){}}),this},before:function(a){if(pl.type(a,"obj")){var b=g.createElement("div");b.appendChild(a),a=b.innerHTML}return pl.each(this.e,function(){var b=this,c=g.createElement("div");c.innerHTML=a;try{pl.each(c.childNodes,function(){b.parentNode.insertBefore(this,b)})}catch(d){}}),this},append:function(a){if(pl.type(a,"obj")){var b=g.createElement("div");b.appendChild(a),a=b.innerHTML}return pl.each(this.e,function(){var b=this,c=g.createElement("div");c.innerHTML=a;try{pl.each(c.childNodes,function(){b.appendChild(this)})}catch(d){}}),this},prepend:function(a){if(pl.type(a,"obj")){var b=g.createElement("div");b.appendChild(a),a=b.innerHTML}return pl.each(this.e,function(){var b=this,c=g.createElement("div");c.innerHTML=a;try{pl.each(c.childNodes,function(){b.insertBefore(this,b.firstChild)})}catch(d){}}),this}}),pl.implement(pl.fn._,pl.fn);var c=pl.browser("ie")?"innerText":"textContent",d={r:function(){this.l=[],this._r=function(a){function b(){c||(c=!0,a())}var c=!1;if(g[C])d.a.b(g,"DOMContentLoaded",b);else if(g.attachEvent){if(g.documentElement.doScroll&&q===q.top){var e=function(){if(!c&&g.body)try{g.documentElement.doScroll("left"),b()}catch(a){setTimeout(e,0)}};e()}d.a.b(g,"readystatechange",function(){g.readyState==="complete"&&b()})}d.a.b(q,"load",b)};var a=this;return function(b){a.l.length||a._r(function(){pl.each(a.l,function(){this()})}),a.l.push(b)}}(),a:function(){function a(a){a=a||q.event;if(a.fixed)return a;a.fixed=!0,a.preventDefault=a.preventDefault||function(){this.returnValue=!1},a.stopPropagation=a.stopPropagation||function(){this.cancelBubble=!0},a.target||(a.target=a.srcElement);if(a.pageX==y&&a.clientX!=y){var b=g.documentElement,c=g.body;a.pageX=a.clientX+(b&&b.scrollLeft||c&&c.scrollLeft||0)-(b.clientLeft||0),a.pageY=a.clientY+(b&&b.scrollTop||c&&c.scrollTop||0)-(b.clientTop||0)}return!a.which&&a.button&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a}function b(b){var b=a(b),c=this.evt[b.type],d;for(d in c)c[d].call(this,b)||(b.preventDefault(),b.stopPropagation())}var c=0;return{b:function(a,e,f){if(a.setInterval&&!a.frameElement&&(a!==q&&(a=q),~~pl.inArray(e,unResolvedEvt)))return window.onload=function(){pl(g.body).bind(e,f)};f.turnID||(f.turnID=++c),a.evt||(a.evt={},a.handleEvt=function(c){if(!pl.type(d.a,z))return b.call(a,c)}),a.evt[e]||(a.evt[e]={},a[C]?a[C](e,a.handleEvt,!1):a.attachEvent("on"+e,a.handleEvt)),a.evt[e][f.turnID]=f},u:function(a,b,c){var d=a.evt&&a.evt[b];if(d){delete d[c.turnID];for(var e in d)return;a.removeEventListener?a.removeEventListener(b,a.handleEvt,!1):a.detachEvent("on"+b,a.handleEvt),delete a.evt[b];for(e in a.evt)return;try{delete a.handleEvt,delete a.evt}catch(f){a[B]("handleEvt"),a[B]("evt")}}}}}(),_r:function(b,c,e){if(c)e?pl.each(a.e,function(){d.a.b(this,b,c)}):pl.each(a.e,function(){d.a.u(this,b,c)});else for(var f in b)arguments.callee(f,b[f],e);return a}},e=function(a,b,c,d){var e=a,a=e.e[0];if(!c)return a[b];if(d)switch(d){case 1:pl.each(e.e,function(){this[b]+=c});break;case-1:pl.each(e.e,function(){this[b]=c+this[b]})}else a[b]=c;return e},f={s:function(a){return a.match("-")?(a=a.split("-"),a[0]+a[1].charAt(0).toUpperCase()+a[1].substr(1)):a},o:function(a){var b=["opacity",a];switch(pl.browser()){case"ie7":b[0]="filter",b[1]="alpha(opacity="+a*100+");";break;case"ie8":b[0]="-ms-filter",b[1]="alpha(opacity="+a*100+")";break;case"safari_khtml":b[0]="-khtml-opacity";break;case"firefox":b[0]="-moz-opacity"}return b},r:function(a){return a?a.match("opacity=")?a.match("=([0-9]+)")[1]/100:a:y},p:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},g:function(a,b){return b==="opacity"&&(b=f.o(0)[0]),f.r(a.currentStyle?a.currentStyle[b]:q.getComputedStyle(a,y).getPropertyValue(b))}},h=function(a,b){return b>0?h(a.parentNode,--b):a}}(),function(){var a=!!g[p+"sByClassName"],b=!!g.querySelectorAll;pl.find=function(c){return pl.extend(c,{attr:{"":function(a,b){return!!a[D](b)},"=":function(a,b,c){return(b=a[D](b))&&b===c},"&=":function(){},"^=":function(){},"$=":function(){},"*=":function(){},"|=":function(){},"!=":function(){}},mods:{"first-child":function(){},"last-child":function(a){for(;(a=a.nextSibling)&&a.nodeType!=1;);return!!a},root:function(a){return a.nodeName.toLowerCase()!=="html"},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?(b[2]==="%"?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.firstChild;c++;do if(f.nodeType==1&&(f.nodeIndex=++c)&&a===f&&(c+d)%e)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?(b[2]==="%"?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.lastChild;c++;do if(f.nodeType==1&&(f.nodeLastIndex=c++)&&a===f&&(c+d)%e)return 0;while(f=f.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return a.parentNode[p+"sByTagName"]("*").length!=1},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&g.documentElement.lang!==b},enabled:function(a){return a.disabled||a.type==="hidden"},disabled:function(a){return!a.disabled},selected:function(){return!child.selected}}}),function(d,e){e&&(d=e+" "+d),e=g;var f=[];if(d==="body *")return g.body[p+"sByTagName"]("*");if(/^[\w[:#.][\w\]*^|=!]*$/.test(d)){var i=0;switch(d.charAt(0)){case"#":i=d.slice(1),f=g[p+"ById"](i),pl.browser("ie")&&f.id!==i&&(f=g.all[i]),f=f?[f]:[];break;case".":var j=d.slice(1);if(a)f=(f=e[p+"sByClassName"](j)).length?f:[];else{for(var j=" "+j+" ",k=e[p+"sByTagName"]("*"),l=0,n;n=k[l++];)(" "+n[o]+" ").indexOf(j)!=-1&&(f[i++]=n);f=i?f:[]}break;case":":for(var k=e[p+"sByTagName"]("*"),l=0,r=d.replace(/[^(]*\(([^)]*)\)/,"$1"),s=d.replace(/\(.*/,"");n=k[l++];)c.mods[s]&&!c.mods[s](n,r)&&(f[i++]=n);f=i?f:[];break;case"[":for(var k=e[p+"sByTagName"]("*"),l=0,s=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/.exec(d),t=s[1],u=s[2]||"",s=s[3];n=k[l++];)c.attr[u]&&(c.attr[u](n,t,s)||t==="class"&&c.attr[u](n,o,s))&&(f[i++]=n);f=i?f:[];break;default:f=(f=e[p+"sByTagName"](d)).length?f:[]}}else if(b&&d.indexOf("!=")==-1)f=e.querySelectorAll(d.replace(/=([^\]]+)/,'="$1"'));else{n=d.split(/ *, */);for(var v=n.length-1,w=!!v,x,z,A,B,C,D,E,F,G,H,I,J;i=n[v--];){for(z=(x=i.replace(/(\([^)]*)\+/,"$1%").replace(/(\[[^\]]+)~/,"$1&").replace(/(~|>|\+)/," $1 ").split(/ +/)).length,l=0,B=" ",k=[e];A=x[l++];)if(A!==" "&&A!==">"&&A!=="~"&&A!=="+"&&k){for(A=A.match(/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?:\:([^(]+)(?:\(([^)]+)\))?)?/),C=A[1]||"*",D=A[2],j=A[3]?" "+A[3]+" ":"",t=A[4],u=A[5]||"",s=A[7],r=s==="nth-child"||s==="nth-last-child"?/(?:(-?\d*)n)?(?:(%|-)(\d*))?/.exec(A[8]==="even"&&"2n"||A[8]==="odd"&&"2n%1"||!/\D/.test(A[8])&&"0n%"+A[8]||A[8]):A[8],E=[],i=F=0,H=l==z;G=k[F++];)switch(B){case" ":for(I=G[p+"sByTagName"](C),G=0;J=I[G++];)(!D||J.id===D)&&(!j||(" "+J[o]+" ").indexOf(j)!=-1)&&(!t||c.attr[u]&&(c.attr[u](J,t,A[6])||t==="class"&&c.attr[u](J,o,A[6])))&&!J.yeasss&&(c.mods[s]?!c.mods[s](J,r):!s)&&(H&&(J.yeasss=1),E[i++]=J);break;case"~":for(C=C.toLowerCase();(G=G.nextSibling)&&!G.yeasss;)G.nodeType==1&&(C==="*"||G.nodeName.toLowerCase()===C)&&(!D||G.id===D)&&(!j||(" "+G[o]+" ").indexOf(j)!=-1)&&(!t||c.attr[u]&&(c.attr[u](J,t,A[6])||t==="class"&&c.attr[u](J,o,A[6])))&&!G.yeasss&&(c.mods[s]?!c.mods[s](G,r):!s)&&(H&&(G.yeasss=1),E[i++]=G);break;case"+":for(;(G=G.nextSibling)&&G.nodeType!=1;);G&&(G.nodeName.toLowerCase()===C.toLowerCase()||C==="*")&&(!D||G.id===D)&&(!j||(" "+J[o]+" ").indexOf(j)!=-1)&&(!t||c.attr[u]&&(c.attr[u](J,t,A[6])||t==="class"&&c.attr[u](J,o,A[6])))&&!G.yeasss&&(c.mods[s]?!c.mods[s](G,r):!s)&&(H&&(G.yeasss=1),E[i++]=G);break;case">":for(I=G[p+"sByTagName"](C),l=0;J=I[l++];)J.parentNode===G&&(!D||J.id===D)&&(!j||(" "+J[o]+" ").indexOf(j)!=-1)&&(!t||c.attr[u]&&(c.attr[u](J,t,A[6])||t==="class"&&c.attr[u](J,o,A[6])))&&!J.yeasss&&(c.mods[s]?!c.mods[s](J,r):!s)&&(H&&(J.yeasss=1),E[i++]=J)}k=E}else B=A;if(w){if(!k.concat){for(E=[],G=0;J=k[G];)E[G++]=J;k=E}f=k.concat(f.length==1?f[0]:f)}else f=k}for(i=f.length;i--;)f[i].yeasss=f[i].nodeIndex=f[i].nodeIndexLast=y}return f}}({})}()})(this,document,"prototype","addEventListener","getElement","className","null","undef","<([A-z]+)>",null,function(){},"setAttribute","getAttribute","removeAttribute")